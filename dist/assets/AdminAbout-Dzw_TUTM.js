import{r as i,s as m,j as e}from"./index-D4gBdtZF.js";import{C}from"./check-circle-fnKANasE.js";import{A as E}from"./alert-circle-Dzr0tImD.js";import{U as A}from"./upload-CJi8tuAb.js";import{R as U}from"./refresh-cw-kYokf9fA.js";import{S as k}from"./save-CfxmEbD6.js";const M=()=>{const[v,u]=i.useState(!0),[g,h]=i.useState(!1),[w,x]=i.useState(!1),[o,b]=i.useState({show:!1,type:"",message:""}),[t,d]=i.useState({id:null,banner_image:"",headline:"",main_narrative:"",mission_statement:"",vision_statement:"",team_intro:"",updated_at:null});i.useEffect(()=>{f()},[]);const f=async()=>{try{u(!0);const{data:s,error:a}=await m.from("about_content").select("*").order("id",{ascending:!0}).limit(1).single();if(a)throw a;s&&d(s)}catch(s){console.error("Error fetching about page content:",s),c("error","Failed to load about page content")}finally{u(!1)}},l=s=>{const{name:a,value:n}=s.target;d(r=>({...r,[a]:n}))},y=async s=>{s.preventDefault(),h(!0);try{let a;if(t.id){const{data:n,error:r}=await m.from("about_content").update({banner_image:t.banner_image,headline:t.headline,main_narrative:t.main_narrative,mission_statement:t.mission_statement,vision_statement:t.vision_statement,team_intro:t.team_intro,updated_at:new Date().toISOString()}).eq("id",t.id);if(r)throw r;a=n}else{const{data:n,error:r}=await m.from("about_content").insert({banner_image:t.banner_image,headline:t.headline,main_narrative:t.main_narrative,mission_statement:t.mission_statement,vision_statement:t.vision_statement,team_intro:t.team_intro});if(r)throw r;a=n}c("success","About page content saved successfully"),f()}catch(a){console.error("Error saving about page content:",a),c("error","Failed to save about page content")}finally{h(!1)}},N=async s=>{const a=s.target.files[0];if(a)try{x(!0);const n=a.name.split(".").pop(),p=`about/${`${Math.random().toString(36).substring(2,15)}.${n}`}`,{error:j,data:R}=await m.storage.from("media").upload(p,a);if(j)throw j;const{data:_}=m.storage.from("media").getPublicUrl(p);d(S=>({...S,banner_image:_.publicUrl})),c("success","Image uploaded successfully")}catch(n){console.error("Error uploading image:",n),c("error","Failed to upload image")}finally{x(!1)}},c=(s,a)=>{b({show:!0,type:s,message:a}),setTimeout(()=>{b({show:!1,type:"",message:""})},5e3)};return v?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-yellow-400"})}):e.jsxs("div",{className:"h-full",children:[o.show&&e.jsxs("div",{className:`fixed top-6 right-6 z-50 p-4 rounded-md shadow-lg flex items-start ${o.type==="success"?"bg-green-500/20 border border-green-500/30 text-green-400":o.type==="error"?"bg-red-500/20 border border-red-500/30 text-red-400":"bg-blue-500/20 border border-blue-500/30 text-blue-400"}`,children:[o.type==="success"?e.jsx(C,{size:18,className:"mr-3 mt-0.5 flex-shrink-0"}):e.jsx(E,{size:18,className:"mr-3 mt-0.5 flex-shrink-0"}),e.jsx("p",{children:o.message})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-serif text-white mb-2",children:"About Page Content Management"}),e.jsx("p",{className:"text-gray-400",children:"Edit and manage the content displayed on the About Us page."})]}),e.jsxs("form",{onSubmit:y,children:[e.jsxs("div",{className:"bg-slate-800 rounded-lg shadow-lg p-6 mb-8",children:[e.jsx("h2",{className:"text-xl font-medium text-white mb-6",children:"Banner Section"}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Banner Image URL"}),e.jsx("input",{type:"text",name:"banner_image",value:t.banner_image||"",onChange:l,className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded focus:outline-none focus:ring-2 focus:ring-yellow-400 text-white",placeholder:"https://example.com/image.jpg"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Enter a URL or upload an image below"}),e.jsx("div",{className:"flex items-center space-x-4 mt-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Upload New Banner Image"}),e.jsxs("label",{className:"flex items-center justify-center w-full h-12 px-4 bg-slate-700 border border-slate-600 rounded cursor-pointer hover:bg-slate-600 transition-colors",children:[e.jsx(A,{size:18,className:"mr-2 text-yellow-400"}),e.jsx("span",{className:"text-gray-300",children:"Choose File"}),e.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:N,disabled:w})]})]})}),t.banner_image&&e.jsxs("div",{className:"mt-4 relative",children:[e.jsx("p",{className:"text-gray-300 mb-2",children:"Current Banner Image:"}),e.jsx("div",{className:"relative h-48 bg-slate-700 rounded overflow-hidden",children:e.jsx("img",{src:t.banner_image,alt:"Current banner",className:"w-full h-full object-cover"})})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Page Headline"}),e.jsx("input",{type:"text",name:"headline",value:t.headline||"",onChange:l,className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded focus:outline-none focus:ring-2 focus:ring-yellow-400 text-white",placeholder:"e.g., WE ARE STORYTELLERS & VISUAL ARTISTS",required:!0})]})]}),e.jsxs("div",{className:"bg-slate-800 rounded-lg shadow-lg p-6 mb-8",children:[e.jsx("h2",{className:"text-xl font-medium text-white mb-6",children:"Main Content"}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Main Narrative"}),e.jsx("textarea",{name:"main_narrative",value:t.main_narrative||"",onChange:l,rows:8,className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded focus:outline-none focus:ring-2 focus:ring-yellow-400 text-white",placeholder:"Enter the main narrative about Pure Ohana Treasures...",required:!0})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Team Introduction"}),e.jsx("textarea",{name:"team_intro",value:t.team_intro||"",onChange:l,rows:4,className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded focus:outline-none focus:ring-2 focus:ring-yellow-400 text-white",placeholder:"Enter text introducing the team..."})]})]}),e.jsxs("div",{className:"bg-slate-800 rounded-lg shadow-lg p-6 mb-8",children:[e.jsx("h2",{className:"text-xl font-medium text-white mb-6",children:"Mission & Vision"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Mission Statement"}),e.jsx("textarea",{name:"mission_statement",value:t.mission_statement||"",onChange:l,rows:4,className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded focus:outline-none focus:ring-2 focus:ring-yellow-400 text-white",placeholder:"Enter your mission statement..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Vision Statement"}),e.jsx("textarea",{name:"vision_statement",value:t.vision_statement||"",onChange:l,rows:4,className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded focus:outline-none focus:ring-2 focus:ring-yellow-400 text-white",placeholder:"Enter your vision statement..."})]})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{type:"submit",disabled:g,className:"px-6 py-3 bg-yellow-400 text-slate-900 rounded-sm hover:bg-yellow-500 transition-colors flex items-center font-medium disabled:opacity-70",children:g?e.jsxs(e.Fragment,{children:[e.jsx(U,{size:18,className:"mr-2 animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(k,{size:18,className:"mr-2"}),"Save Changes"]})})})]})]})};export{M as default};
