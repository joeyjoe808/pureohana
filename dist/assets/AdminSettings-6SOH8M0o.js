import{c as k,r,j as e,d as z,h as U,s as m}from"./index-D4gBdtZF.js";import{C as _}from"./check-circle-fnKANasE.js";import{A as L}from"./alert-circle-Dzr0tImD.js";import{R as y}from"./refresh-cw-kYokf9fA.js";import{S as j}from"./save-CfxmEbD6.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=k("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),M=()=>{const[F,N]=r.useState(null),[v,P]=r.useState(!0),[u,x]=r.useState(!1),[f,h]=r.useState(!1),[d,p]=r.useState({show:!1,type:"",message:""}),[t,g]=r.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[o,w]=r.useState({email:"",name:"",avatar_url:""});r.useEffect(()=>{async function a(){var s,i;try{const{data:{user:l}}=await m.auth.getUser();l&&(N(l),w({email:l.email||"",name:((s=l.user_metadata)==null?void 0:s.full_name)||"",avatar_url:((i=l.user_metadata)==null?void 0:i.avatar_url)||""}))}catch(l){console.error("Error fetching user:",l),n("error","Failed to load user profile")}finally{P(!1)}}a()},[]);const C=async a=>{a.preventDefault(),x(!0);try{const{error:s}=await m.auth.updateUser({data:{full_name:o.name,avatar_url:o.avatar_url}});if(s)throw s;n("success","Profile updated successfully")}catch(s){console.error("Error updating profile:",s),n("error","Failed to update profile")}finally{x(!1)}},S=async a=>{if(a.preventDefault(),t.newPassword!==t.confirmPassword){n("error","New passwords do not match");return}h(!0);try{const{error:s}=await m.auth.updateUser({password:t.newPassword});if(s)throw s;g({currentPassword:"",newPassword:"",confirmPassword:""}),n("success","Password updated successfully")}catch(s){console.error("Error updating password:",s),n("error",s.message||"Failed to update password")}finally{h(!1)}},c=a=>{const{name:s,value:i}=a.target;g({...t,[s]:i})},b=a=>{const{name:s,value:i}=a.target;w({...o,[s]:i})},n=(a,s)=>{p({show:!0,type:a,message:s}),setTimeout(()=>{p({show:!1,type:"",message:""})},5e3)};return v?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-yellow-400"})}):e.jsxs("div",{className:"h-full",children:[d.show&&e.jsxs("div",{className:`fixed top-6 right-6 z-50 p-4 rounded-md shadow-lg flex items-start ${d.type==="success"?"bg-green-500/20 border border-green-500/30 text-green-400":d.type==="error"?"bg-red-500/20 border border-red-500/30 text-red-400":"bg-blue-500/20 border border-blue-500/30 text-blue-400"}`,children:[d.type==="success"?e.jsx(_,{size:18,className:"mr-3 mt-0.5 flex-shrink-0"}):e.jsx(L,{size:18,className:"mr-3 mt-0.5 flex-shrink-0"}),e.jsx("p",{children:d.message})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-serif text-white mb-2",children:"Account Settings"}),e.jsx("p",{className:"text-gray-400",children:"Update your profile and security preferences."})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-8",children:[e.jsxs("div",{className:"bg-slate-800 rounded-lg shadow-lg p-6",children:[e.jsxs("h2",{className:"text-lg font-medium text-white mb-6 flex items-center",children:[e.jsx(z,{size:18,className:"mr-2 text-yellow-400"}),"Profile Information"]}),e.jsxs("form",{onSubmit:C,children:[e.jsxs("div",{className:"space-y-6 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Email Address"}),e.jsx("input",{type:"email",value:o.email,disabled:!0,className:"w-full px-4 py-2 bg-slate-700/50 border border-slate-600 rounded focus:outline-none focus:ring-2 focus:ring-yellow-400 text-white disabled:opacity-70"}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Email address cannot be changed"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Full Name"}),e.jsx("input",{type:"text",name:"name",value:o.name,onChange:b,className:"w-full px-4 py-2 bg-slate-700/50 border border-slate-600 rounded focus:outline-none focus:ring-2 focus:ring-yellow-400 text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Profile Picture URL"}),e.jsx("input",{type:"text",name:"avatar_url",value:o.avatar_url,onChange:b,className:"w-full px-4 py-2 bg-slate-700/50 border border-slate-600 rounded focus:outline-none focus:ring-2 focus:ring-yellow-400 text-white",placeholder:"https://example.com/avatar.jpg"})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{type:"submit",className:"px-4 py-2 bg-yellow-400 text-slate-900 rounded hover:bg-yellow-500 transition-colors flex items-center",disabled:u,children:u?e.jsxs(e.Fragment,{children:[e.jsx(y,{size:18,className:"mr-2 animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(j,{size:18,className:"mr-2"}),"Save Changes"]})})})]})]}),e.jsxs("div",{className:"bg-slate-800 rounded-lg shadow-lg p-6",children:[e.jsxs("h2",{className:"text-lg font-medium text-white mb-6 flex items-center",children:[e.jsx(E,{size:18,className:"mr-2 text-yellow-400"}),"Security Settings"]}),e.jsxs("form",{onSubmit:S,children:[e.jsxs("div",{className:"space-y-6 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Current Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(U,{size:16,className:"text-gray-500"})}),e.jsx("input",{type:"password",name:"currentPassword",value:t.currentPassword,onChange:c,required:!0,className:"w-full pl-10 px-4 py-2 bg-slate-700/50 border border-slate-600 rounded focus:outline-none focus:ring-2 focus:ring-yellow-400 text-white",placeholder:"••••••••••••"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"New Password"}),e.jsx("input",{type:"password",name:"newPassword",value:t.newPassword,onChange:c,required:!0,className:"w-full px-4 py-2 bg-slate-700/50 border border-slate-600 rounded focus:outline-none focus:ring-2 focus:ring-yellow-400 text-white",placeholder:"••••••••••••",minLength:8}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Password must be at least 8 characters"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Confirm New Password"}),e.jsx("input",{type:"password",name:"confirmPassword",value:t.confirmPassword,onChange:c,required:!0,className:"w-full px-4 py-2 bg-slate-700/50 border border-slate-600 rounded focus:outline-none focus:ring-2 focus:ring-yellow-400 text-white",placeholder:"••••••••••••"})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{type:"submit",className:"px-4 py-2 bg-yellow-400 text-slate-900 rounded hover:bg-yellow-500 transition-colors flex items-center",disabled:f,children:f?e.jsxs(e.Fragment,{children:[e.jsx(y,{size:18,className:"mr-2 animate-spin"}),"Updating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(j,{size:18,className:"mr-2"}),"Update Password"]})})})]})]})]})]})};export{M as default};
