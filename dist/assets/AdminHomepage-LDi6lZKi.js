import{r as i,s as m,j as e,i as U}from"./index-D4gBdtZF.js";import{C as B}from"./check-circle-fnKANasE.js";import{A as R}from"./alert-circle-Dzr0tImD.js";import{P as F}from"./play-BOYHYCKk.js";import{U as C}from"./upload-CJi8tuAb.js";import{R as z}from"./refresh-cw-kYokf9fA.js";import{S as A}from"./save-CfxmEbD6.js";const D=()=>{const[S,g]=i.useState(!0),[u,p]=i.useState(!1),[f,y]=i.useState(!1),[o,_]=i.useState({show:!1,type:"",message:""}),[a,x]=i.useState({id:null,banner_image:"",banner_video:"",headline:"",intro_text:"",cta_primary_text:"",cta_primary_link:"",cta_secondary_text:"",cta_secondary_link:"",behind_scenes_text:"",behind_scenes_link:""}),[h,c]=i.useState("image");i.useEffect(()=>{j()},[]);const j=async()=>{try{g(!0);const{data:t,error:s}=await m.from("homepage_content").select("*").order("id",{ascending:!0}).limit(1).single();if(s)throw s;t&&(x(t),c(t.banner_video?"video":"image"))}catch(t){console.error("Error fetching homepage content:",t),d("error","Failed to load homepage content")}finally{g(!1)}},r=t=>{const{name:s,value:l}=t.target;x(n=>({...n,[s]:l}))},E=async t=>{t.preventDefault(),p(!0);try{let s;if(a.id){const{data:l,error:n}=await m.from("homepage_content").update({banner_image:a.banner_image,banner_video:a.banner_video,headline:a.headline,intro_text:a.intro_text,cta_primary_text:a.cta_primary_text,cta_primary_link:a.cta_primary_link,cta_secondary_text:a.cta_secondary_text,cta_secondary_link:a.cta_secondary_link,behind_scenes_text:a.behind_scenes_text,behind_scenes_link:a.behind_scenes_link,updated_at:new Date().toISOString()}).eq("id",a.id);if(n)throw n;s=l}else{const{data:l,error:n}=await m.from("homepage_content").insert({banner_image:a.banner_image,banner_video:a.banner_video,headline:a.headline,intro_text:a.intro_text,cta_primary_text:a.cta_primary_text,cta_primary_link:a.cta_primary_link,cta_secondary_text:a.cta_secondary_text,cta_secondary_link:a.cta_secondary_link,behind_scenes_text:a.behind_scenes_text,behind_scenes_link:a.behind_scenes_link});if(n)throw n;s=l}d("success","Homepage content saved successfully"),j()}catch(s){console.error("Error saving homepage content:",s),d("error","Failed to save homepage content")}finally{p(!1)}},v=async(t,s)=>{const l=t.target.files[0];if(l)try{y(!0);const n=l.name.split(".").pop(),N=`homepage/${`${Math.random().toString(36).substring(2,15)}.${n}`}`,{error:w,data:$}=await m.storage.from("media").upload(N,l);if(w)throw w;const{data:k}=m.storage.from("media").getPublicUrl(N);s==="image"?(x(b=>({...b,banner_image:k.publicUrl,banner_video:""})),c("image")):(x(b=>({...b,banner_video:k.publicUrl,banner_image:""})),c("video")),d("success",`${s.charAt(0).toUpperCase()+s.slice(1)} uploaded successfully`)}catch(n){console.error(`Error uploading ${s}:`,n),d("error",`Failed to upload ${s}`)}finally{y(!1)}},d=(t,s)=>{_({show:!0,type:t,message:s}),setTimeout(()=>{_({show:!1,type:"",message:""})},5e3)};return S?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-yellow-400"})}):e.jsxs("div",{className:"h-full",children:[o.show&&e.jsxs("div",{className:`fixed top-6 right-6 z-50 p-4 rounded-md shadow-lg flex items-start ${o.type==="success"?"bg-green-500/20 border border-green-500/30 text-green-400":o.type==="error"?"bg-red-500/20 border border-red-500/30 text-red-400":"bg-blue-500/20 border border-blue-500/30 text-blue-400"}`,children:[o.type==="success"?e.jsx(B,{size:18,className:"mr-3 mt-0.5 flex-shrink-0"}):e.jsx(R,{size:18,className:"mr-3 mt-0.5 flex-shrink-0"}),e.jsx("p",{children:o.message})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-serif text-white mb-2",children:"Homepage Content Management"}),e.jsx("p",{className:"text-gray-400",children:"Edit and manage the content displayed on your homepage."})]}),e.jsxs("form",{onSubmit:E,children:[e.jsxs("div",{className:"bg-slate-800 rounded-lg shadow-lg p-6 mb-8",children:[e.jsx("h2",{className:"text-xl font-medium text-white mb-6",children:"Hero Section"}),e.jsxs("div",{className:"mb-8",children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Banner Media"}),e.jsxs("div",{className:"flex space-x-4 mb-4",children:[e.jsxs("button",{type:"button",className:`px-4 py-2 rounded ${h==="image"?"bg-yellow-400 text-slate-900":"bg-slate-700 text-white"}`,onClick:()=>c("image"),children:[e.jsx(U,{size:16,className:"inline mr-2"}),"Image"]}),e.jsxs("button",{type:"button",className:`px-4 py-2 rounded ${h==="video"?"bg-yellow-400 text-slate-900":"bg-slate-700 text-white"}`,onClick:()=>c("video"),children:[e.jsx(F,{size:16,className:"inline mr-2"}),"Video"]})]}),h==="image"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Banner Image URL"}),e.jsx("input",{type:"text",name:"banner_image",value:a.banner_image||"",onChange:r,className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded focus:outline-none focus:ring-2 focus:ring-yellow-400 text-white",placeholder:"https://example.com/image.jpg"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Enter a URL or upload an image below"})]}),e.jsx("div",{className:"flex items-center space-x-4 mb-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Upload New Banner Image"}),e.jsxs("label",{className:"flex items-center justify-center w-full h-12 px-4 bg-slate-700 border border-slate-600 rounded cursor-pointer hover:bg-slate-600 transition-colors",children:[e.jsx(C,{size:18,className:"mr-2 text-yellow-400"}),e.jsx("span",{className:"text-gray-300",children:"Choose File"}),e.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:t=>v(t,"image"),disabled:f})]})]})}),a.banner_image&&e.jsxs("div",{className:"mt-4 relative",children:[e.jsx("p",{className:"text-gray-300 mb-2",children:"Current Banner Image:"}),e.jsx("div",{className:"relative h-48 bg-slate-700 rounded overflow-hidden",children:e.jsx("img",{src:a.banner_image,alt:"Current banner",className:"w-full h-full object-cover"})})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Banner Video URL"}),e.jsx("input",{type:"text",name:"banner_video",value:a.banner_video||"",onChange:r,className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded focus:outline-none focus:ring-2 focus:ring-yellow-400 text-white",placeholder:"https://example.com/video.mp4"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Enter a URL or upload a video below"})]}),e.jsx("div",{className:"flex items-center space-x-4 mb-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Upload New Banner Video"}),e.jsxs("label",{className:"flex items-center justify-center w-full h-12 px-4 bg-slate-700 border border-slate-600 rounded cursor-pointer hover:bg-slate-600 transition-colors",children:[e.jsx(C,{size:18,className:"mr-2 text-yellow-400"}),e.jsx("span",{className:"text-gray-300",children:"Choose File"}),e.jsx("input",{type:"file",className:"hidden",accept:"video/*",onChange:t=>v(t,"video"),disabled:f})]})]})}),a.banner_video&&e.jsxs("div",{className:"mt-4",children:[e.jsx("p",{className:"text-gray-300 mb-2",children:"Current Banner Video:"}),e.jsx("div",{className:"relative h-48 bg-slate-700 rounded overflow-hidden",children:e.jsx("video",{src:a.banner_video,className:"w-full h-full object-cover",controls:!0})})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Main Headline"}),e.jsx("input",{type:"text",name:"headline",value:a.headline||"",onChange:r,className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded focus:outline-none focus:ring-2 focus:ring-yellow-400 text-white",placeholder:"Enter main headline text",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Introductory Text"}),e.jsx("textarea",{name:"intro_text",value:a.intro_text||"",onChange:r,rows:3,className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded focus:outline-none focus:ring-2 focus:ring-yellow-400 text-white",placeholder:"Enter introductory paragraph text"})]})]})]}),e.jsxs("div",{className:"bg-slate-800 rounded-lg shadow-lg p-6 mb-8",children:[e.jsx("h2",{className:"text-xl font-medium text-white mb-6",children:"Call to Action Buttons"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Primary CTA Text"}),e.jsx("input",{type:"text",name:"cta_primary_text",value:a.cta_primary_text||"",onChange:r,className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded focus:outline-none focus:ring-2 focus:ring-yellow-400 text-white",placeholder:"e.g., OUR EXPERIENCES"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Primary CTA Link"}),e.jsx("input",{type:"text",name:"cta_primary_link",value:a.cta_primary_link||"",onChange:r,className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded focus:outline-none focus:ring-2 focus:ring-yellow-400 text-white",placeholder:"e.g., /services"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Secondary CTA Text"}),e.jsx("input",{type:"text",name:"cta_secondary_text",value:a.cta_secondary_text||"",onChange:r,className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded focus:outline-none focus:ring-2 focus:ring-yellow-400 text-white",placeholder:"e.g., VIEW OUR WORK"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Secondary CTA Link"}),e.jsx("input",{type:"text",name:"cta_secondary_link",value:a.cta_secondary_link||"",onChange:r,className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded focus:outline-none focus:ring-2 focus:ring-yellow-400 text-white",placeholder:"e.g., /portfolio"})]})]})]}),e.jsxs("div",{className:"bg-slate-800 rounded-lg shadow-lg p-6 mb-8",children:[e.jsx("h2",{className:"text-xl font-medium text-white mb-6",children:"Behind the Scenes Section"}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Behind the Scenes Text"}),e.jsx("textarea",{name:"behind_scenes_text",value:a.behind_scenes_text||"",onChange:r,rows:3,className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded focus:outline-none focus:ring-2 focus:ring-yellow-400 text-white",placeholder:"Enter text describing behind the scenes content"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Behind the Scenes Link"}),e.jsx("input",{type:"text",name:"behind_scenes_link",value:a.behind_scenes_link||"",onChange:r,className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded focus:outline-none focus:ring-2 focus:ring-yellow-400 text-white",placeholder:"e.g., /about"})]})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{type:"submit",disabled:u,className:"px-6 py-3 bg-yellow-400 text-slate-900 rounded-sm hover:bg-yellow-500 transition-colors flex items-center font-medium disabled:opacity-70",children:u?e.jsxs(e.Fragment,{children:[e.jsx(z,{size:18,className:"mr-2 animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(A,{size:18,className:"mr-2"}),"Save Changes"]})})})]})]})};export{D as default};
