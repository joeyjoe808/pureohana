import{c as y,r as i,e as C,j as e,f as E,A as S,I as T,E as R,U as p,g as q,F as N,L as n,H as U,a as D,s as m}from"./index-BZafi1pq.js";import{R as w}from"./refresh-cw-Dg1d389B.js";import{E as A}from"./eye-FRUA24Fk.js";import{C as I}from"./clock-DN9Yg3YM.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x=y("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v=y("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),L=()=>{const[s,r]=i.useState({loading:!0,success:!1,error:null,details:null});i.useEffect(()=>{a()},[]);const a=async()=>{r({loading:!0,success:!1,error:null,details:null});try{const t=await C();t.success?r({loading:!1,success:!0,error:null,details:null}):r({loading:!1,success:!1,error:t.error,details:t.details})}catch(t){r({loading:!1,success:!1,error:t.message,details:"Unexpected error checking connection"})}};return e.jsxs("div",{className:"bg-slate-800 rounded-lg p-6 mb-6",children:[e.jsx("h2",{className:"text-xl font-medium text-white mb-4",children:"Supabase Connection Status"}),e.jsx("div",{className:`p-4 rounded-md ${s.loading?"bg-slate-700/50 text-white":s.success?"bg-green-500/10 border border-green-500/30 text-green-400":"bg-red-500/10 border border-red-500/30 text-red-400"}`,children:s.loading?e.jsxs("div",{className:"flex items-center",children:[e.jsx(w,{size:18,className:"animate-spin mr-3 flex-shrink-0"}),e.jsx("p",{children:"Testing connection to Supabase..."})]}):s.success?e.jsxs("div",{className:"flex items-start",children:[e.jsx(E,{size:18,className:"mr-3 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Connection successful"}),e.jsx("p",{className:"text-sm mt-1",children:"Your connection to Supabase is working correctly."})]})]}):e.jsxs("div",{className:"flex items-start",children:[e.jsx(S,{size:18,className:"mr-3 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Connection failed"}),e.jsx("p",{className:"text-sm mt-1",children:s.error}),s.details&&e.jsxs("p",{className:"text-sm mt-1",children:["Details: ",s.details]}),e.jsxs("div",{className:"mt-3 bg-slate-800/70 p-3 rounded text-white text-sm",children:[e.jsx("p",{className:"font-medium mb-1",children:"Troubleshooting steps:"}),e.jsxs("ol",{className:"list-decimal pl-5 space-y-1",children:[e.jsx("li",{children:"Check that your Supabase project is active"}),e.jsx("li",{children:"Verify your environment variables are correct"}),e.jsx("li",{children:"Make sure CORS settings are configured for your domain"}),e.jsx("li",{children:"Check browser console for more detailed error information"})]})]})]})]})}),e.jsxs("div",{className:"flex justify-between items-center mt-4",children:[e.jsxs("button",{onClick:a,className:"px-3 py-1 bg-slate-700 text-white rounded hover:bg-slate-600 transition-colors flex items-center",children:[e.jsx(w,{size:16,className:"mr-2"}),"Retest Connection"]}),e.jsxs("a",{href:"https://supabase.com/docs/guides/auth/troubleshooting",target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 flex items-center text-sm hover:text-blue-300",children:[e.jsx(T,{size:16,className:"mr-1"}),"Troubleshooting Guide",e.jsx(R,{size:12,className:"ml-1"})]})]})]})},o=({title:s,value:r,icon:a,description:t,trend:l})=>e.jsxs("div",{className:"bg-slate-800 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsx("div",{className:"bg-slate-700 p-3 rounded-lg",children:a}),l&&e.jsxs("div",{className:`flex items-center ${l>0?"text-green-400":"text-red-400"}`,children:[l>0?e.jsx(v,{size:16,className:"mr-1"}):e.jsx(v,{size:16,className:"mr-1 transform rotate-180"}),e.jsxs("span",{className:"text-sm",children:[Math.abs(l),"%"]})]})]}),e.jsx("div",{className:"text-2xl font-serif text-white mb-1",children:r}),e.jsx("div",{className:"font-medium text-gray-300 mb-2",children:s}),e.jsx("div",{className:"text-xs text-gray-400",children:t})]}),O=()=>{const[s,r]=i.useState({subscribers:0,inquiries:0,blogPosts:0,activeUsers:0}),[a,t]=i.useState([]),[l,h]=i.useState(!0),[u,b]=i.useState(null);return i.useEffect(()=>{(async()=>{try{h(!0);const{count:d,error:j}=await m.from("newsletter_subscribers").select("*",{count:"exact",head:!0});if(j)throw j;const{data:k,error:g}=await m.from("newsletter_subscribers").select("*").order("created_at",{ascending:!1}).limit(5);if(g)throw g;const{count:z,error:f}=await m.from("posts").select("*",{count:"exact",head:!0});if(f)throw f;r({subscribers:d||0,inquiries:12,blogPosts:z||0,activeUsers:24}),t(k||[]),b(null)}catch(d){console.error("Error fetching dashboard data:",d),b(d.message)}finally{h(!1)}})()},[]),l?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-yellow-400"})}):e.jsxs("div",{children:[e.jsxs("header",{className:"mb-10",children:[e.jsx("h1",{className:"text-2xl font-serif text-white mb-2",children:"Welcome back"}),e.jsx("p",{className:"text-gray-400",children:"Here's what's happening with Pure Ohana Treasures today."})]}),e.jsx(L,{}),u&&e.jsxs("div",{className:"bg-red-500/10 border border-red-500/30 rounded-md p-4 mb-6 flex items-start",children:[e.jsx(S,{size:18,className:"text-red-400 mr-3 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-red-300 font-medium",children:"Error loading dashboard data"}),e.jsx("p",{className:"text-red-300 text-sm mt-1",children:u}),e.jsx("p",{className:"text-red-300 text-sm mt-2",children:"This may be due to connection issues with Supabase. Please check your CORS settings and make sure your database is accessible."})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-10",children:[e.jsx(o,{title:"Total Subscribers",value:s.subscribers,icon:e.jsx(p,{size:20,className:"text-yellow-400"}),description:"Total newsletter subscribers",trend:8}),e.jsx(o,{title:"Inquiries",value:s.inquiries,icon:e.jsx(q,{size:20,className:"text-blue-400"}),description:"New client inquiries this month",trend:12}),e.jsx(o,{title:"Blog Posts",value:s.blogPosts,icon:e.jsx(N,{size:20,className:"text-purple-400"}),description:"Published articles on the website",trend:0}),e.jsx(o,{title:"Website Traffic",value:s.activeUsers,icon:e.jsx(A,{size:20,className:"text-green-400"}),description:"Active users today",trend:-3})]}),e.jsxs("div",{className:"bg-slate-800 rounded-lg p-6 mb-10",children:[e.jsx("h2",{className:"text-lg font-medium text-white mb-6",children:"Quick Actions"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs(n,{to:"/admin/homepage",className:"bg-slate-700 hover:bg-slate-600 transition-colors p-4 rounded-md flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(U,{size:20,className:"text-yellow-400 mr-3"}),e.jsx("span",{className:"text-white",children:"Edit Homepage"})]}),e.jsx(x,{size:16,className:"text-gray-400"})]}),e.jsxs(n,{to:"/admin/blog",className:"bg-slate-700 hover:bg-slate-600 transition-colors p-4 rounded-md flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(N,{size:20,className:"text-yellow-400 mr-3"}),e.jsx("span",{className:"text-white",children:"Manage Blog"})]}),e.jsx(x,{size:16,className:"text-gray-400"})]}),e.jsxs(n,{to:"/admin/subscribers",className:"bg-slate-700 hover:bg-slate-600 transition-colors p-4 rounded-md flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(p,{size:20,className:"text-green-400 mr-3"}),e.jsx("span",{className:"text-white",children:"Manage Subscribers"})]}),e.jsx(x,{size:16,className:"text-gray-400"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-slate-800 rounded-lg p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-lg font-medium text-white",children:"Recent Subscribers"}),e.jsx(n,{to:"/admin/subscribers",className:"text-sm text-yellow-400 hover:text-yellow-300",children:"View all"})]}),a.length>0?e.jsx("div",{className:"space-y-4",children:a.map(c=>e.jsxs("div",{className:"flex items-start p-3 bg-slate-700/50 rounded-md",children:[e.jsx("div",{className:"bg-slate-700 h-10 w-10 rounded-full flex items-center justify-center mr-3",children:e.jsx("span",{className:"text-yellow-400 text-xs",children:c.email.substring(0,2).toUpperCase()})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-white font-medium",children:c.email}),e.jsxs("div",{className:"text-xs text-gray-400 flex items-center mt-1",children:[e.jsx(I,{size:12,className:"mr-1"}),new Date(c.created_at).toLocaleDateString()," â€¢",e.jsx("span",{className:"ml-1",children:c.source||"website"})]})]})]},c.id))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-gray-400 mb-2",children:"No recent subscribers"}),e.jsx("p",{className:"text-sm text-gray-500",children:"New subscribers will appear here when they sign up."})]})]}),e.jsxs("div",{className:"bg-slate-800 rounded-lg p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-lg font-medium text-white",children:"Recent Inquiries"}),e.jsx(n,{to:"/admin/inquiries",className:"text-sm text-yellow-400 hover:text-yellow-300",children:"View all"})]}),e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-slate-700 text-yellow-400 mb-4",children:e.jsx(D,{size:24})}),e.jsx("h3",{className:"text-white font-medium mb-2",children:"No Recent Inquiries"}),e.jsx("p",{className:"text-sm text-gray-400 mb-6 max-w-sm mx-auto",children:"There are no recent inquiries to display at this time. New inquiries will appear here when clients reach out."})]})]})]})]})};export{O as default};
