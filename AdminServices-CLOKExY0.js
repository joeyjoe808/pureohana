import{c as R,r as n,s as d,j as e,X as U}from"./index-BZafi1pq.js";import{C as B}from"./check-circle-D4RSxU1c.js";import{A as M}from"./alert-circle-CxEUEL6T.js";import{C as $}from"./chevron-left-CKgXfDlP.js";import{U as H}from"./upload-BRWpwyAp.js";import{P as k}from"./plus-CkoI7QzG.js";import{T as G}from"./trash-u1tdhSct.js";import{R as J}from"./refresh-cw-Dg1d389B.js";import{S as K}from"./save-q5_rBzhe.js";import{P as X}from"./plus-circle-CHzqEdQK.js";import{E as Q}from"./eye-FRUA24Fk.js";import{S as V}from"./square-pen-BF3EpvLv.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=R("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]),me=()=>{const[p,o]=n.useState(!0),[u,S]=n.useState([]),[j,c]=n.useState(!1),[s,r]=n.useState(null),[m,N]=n.useState({show:!1,type:"",message:""}),[E,w]=n.useState(!1),[z,b]=n.useState(!1),[f,v]=n.useState("");n.useEffect(()=>{y()},[]);const y=async()=>{try{o(!0);const{data:t,error:l}=await d.from("service_pages").select("*").order("display_order",{ascending:!0});if(l)throw l;S(t||[])}catch(t){console.error("Error fetching services:",t),i("error","Failed to load services")}finally{o(!1)}},a=t=>{const{name:l,value:x,type:C,checked:h}=t.target;r(g=>({...g,[l]:C==="checkbox"?h:x}))},F=async t=>{if(t.preventDefault(),!s.title||!s.slug||!s.headline||!s.description){i("error","Please fill out all required fields");return}try{if(o(!0),typeof s.features=="string")try{s.features=JSON.parse(s.features)}catch{s.features=[]}if(s.id){const{error:l}=await d.from("service_pages").update({title:s.title,slug:s.slug,headline:s.headline,description:s.description,banner_image:s.banner_image,content:s.content,features:s.features,cta_text:s.cta_text,cta_link:s.cta_link,meta_title:s.meta_title,meta_description:s.meta_description,is_published:s.is_published,display_order:s.display_order||0,updated_at:new Date().toISOString()}).eq("id",s.id);if(l)throw l;i("success","Service updated successfully")}else{const{error:l}=await d.from("service_pages").insert({title:s.title,slug:s.slug,headline:s.headline,description:s.description,banner_image:s.banner_image,content:s.content,features:s.features,cta_text:s.cta_text,cta_link:s.cta_link,meta_title:s.meta_title,meta_description:s.meta_description,is_published:s.is_published===void 0?!0:s.is_published,display_order:u.length});if(l)throw l;i("success","Service created successfully")}y(),c(!1),r(null)}catch(l){console.error("Error saving service:",l),i("error",`Failed to save service: ${l.message}`)}finally{o(!1)}},D=t=>{if(typeof t.features=="string")try{t.features=JSON.parse(t.features)}catch{t.features=[]}r(t),c(!0)},_=()=>{r({title:"",slug:"",headline:"",description:"",banner_image:"",content:"",features:[],cta_text:"LEARN MORE",cta_link:"/contact",meta_title:"",meta_description:"",is_published:!0,display_order:u.length}),c(!0)},I=async()=>{if(!(!s||!s.id))try{o(!0),b(!1);const{error:t}=await d.from("service_pages").delete().eq("id",s.id);if(t)throw t;i("success","Service deleted successfully"),y(),c(!1),r(null)}catch(t){console.error("Error deleting service:",t),i("error","Failed to delete service")}finally{o(!1)}},A=async t=>{const l=t.target.files[0];if(l)try{w(!0);const x=l.name.split(".").pop(),h=`services/${`${Math.random().toString(36).substring(2,15)}.${x}`}`,{error:g,data:Y}=await d.storage.from("media").upload(h,l);if(g)throw g;const{data:O}=d.storage.from("media").getPublicUrl(h);r(q=>({...q,banner_image:O.publicUrl})),i("success","Image uploaded successfully")}catch(x){console.error("Error uploading image:",x),i("error","Failed to upload image")}finally{w(!1)}},P=()=>{if(!f.trim())return;const t=[...s.features||[],f];r({...s,features:t}),v("")},T=t=>{const l=[...s.features];l.splice(t,1),r({...s,features:l})},L=()=>s!=null&&s.title?s.title.toLowerCase().replace(/[^a-z0-9 ]/g,"").replace(/\s+/g,"-"):"",i=(t,l)=>{N({show:!0,type:t,message:l}),setTimeout(()=>{N({show:!1,type:"",message:""})},5e3)};return p&&!j?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-yellow-400"})}):e.jsxs("div",{className:"h-full",children:[m.show&&e.jsxs("div",{className:`fixed top-6 right-6 z-50 p-4 rounded-md shadow-lg flex items-start ${m.type==="success"?"bg-green-500/20 border border-green-500/30 text-green-400":m.type==="error"?"bg-red-500/20 border border-red-500/30 text-red-400":"bg-blue-500/20 border border-blue-500/30 text-blue-400"}`,children:[m.type==="success"?e.jsx(B,{size:18,className:"mr-3 mt-0.5 flex-shrink-0"}):e.jsx(M,{size:18,className:"mr-3 mt-0.5 flex-shrink-0"}),e.jsx("p",{children:m.message})]}),z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-slate-900/80",children:e.jsxs("div",{className:"bg-slate-800 p-8 rounded-lg max-w-md w-full",children:[e.jsx("h3",{className:"text-xl font-medium text-white mb-4",children:"Confirm Deletion"}),e.jsxs("p",{className:"text-gray-300 mb-6",children:['Are you sure you want to delete "',s.title,'"? This action cannot be undone.']}),e.jsxs("div",{className:"flex justify-end space-x-4",children:[e.jsx("button",{onClick:()=>b(!1),className:"px-4 py-2 bg-slate-700 text-white rounded hover:bg-slate-600 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:I,className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 transition-colors",children:"Delete"})]})]})}),j?e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx("button",{type:"button",onClick:()=>{c(!1),r(null)},className:"mr-4 text-gray-400 hover:text-white",children:e.jsx($,{size:24})}),e.jsx("h1",{className:"text-2xl font-serif text-white",children:s.id?"Edit Service":"Create New Service"})]}),e.jsxs("form",{onSubmit:F,children:[e.jsxs("div",{className:"bg-slate-800 rounded-lg shadow-lg p-6 mb-8",children:[e.jsx("h2",{className:"text-xl font-medium text-white mb-6",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Title*"}),e.jsx("input",{type:"text",name:"title",value:s.title||"",onChange:a,className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded focus:outline-none focus:ring-2 focus:ring-yellow-400 text-white",placeholder:"Service Title",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-gray-300 mb-2",children:["Slug*",e.jsx("button",{type:"button",onClick:()=>r({...s,slug:L()}),className:"ml-2 text-xs text-yellow-400 hover:text-yellow-300",children:"Generate from title"})]}),e.jsx("input",{type:"text",name:"slug",value:s.slug||"",onChange:a,className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded focus:outline-none focus:ring-2 focus:ring-yellow-400 text-white",placeholder:"service-url-slug",required:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Headline (H1)*"}),e.jsx("input",{type:"text",name:"headline",value:s.headline||"",onChange:a,className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded focus:outline-none focus:ring-2 focus:ring-yellow-400 text-white",placeholder:"Main Headline (H1)",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Display Order"}),e.jsx("input",{type:"number",name:"display_order",value:s.display_order||0,onChange:a,className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded focus:outline-none focus:ring-2 focus:ring-yellow-400 text-white",min:"0"})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Short Description*"}),e.jsx("textarea",{name:"description",value:s.description||"",onChange:a,rows:3,className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded focus:outline-none focus:ring-2 focus:ring-yellow-400 text-white",placeholder:"Brief description of the service",required:!0})]}),e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx("input",{type:"checkbox",id:"is_published",name:"is_published",checked:s.is_published,onChange:a,className:"mr-2"}),e.jsx("label",{htmlFor:"is_published",className:"text-gray-300",children:"Publish this service (make it visible to website visitors)"})]})]}),e.jsxs("div",{className:"bg-slate-800 rounded-lg shadow-lg p-6 mb-8",children:[e.jsx("h2",{className:"text-xl font-medium text-white mb-6",children:"Banner Image"}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Banner Image URL"}),e.jsx("input",{type:"text",name:"banner_image",value:s.banner_image||"",onChange:a,className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded focus:outline-none focus:ring-2 focus:ring-yellow-400 text-white",placeholder:"https://example.com/image.jpg"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Enter a URL or upload an image below"}),e.jsx("div",{className:"flex items-center space-x-4 mt-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Upload New Image"}),e.jsxs("label",{className:"flex items-center justify-center w-full h-12 px-4 bg-slate-700 border border-slate-600 rounded cursor-pointer hover:bg-slate-600 transition-colors",children:[e.jsx(H,{size:18,className:"mr-2 text-yellow-400"}),e.jsx("span",{className:"text-gray-300",children:"Choose File"}),e.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:A,disabled:E})]})]})}),s.banner_image&&e.jsxs("div",{className:"mt-4 relative",children:[e.jsx("p",{className:"text-gray-300 mb-2",children:"Current Banner Image:"}),e.jsx("div",{className:"relative h-48 bg-slate-700 rounded overflow-hidden",children:e.jsx("img",{src:s.banner_image,alt:"Current banner",className:"w-full h-full object-cover"})})]})]})]}),e.jsxs("div",{className:"bg-slate-800 rounded-lg shadow-lg p-6 mb-8",children:[e.jsx("h2",{className:"text-xl font-medium text-white mb-6",children:"Detailed Content"}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Main Content"}),e.jsx("textarea",{name:"content",value:s.content||"",onChange:a,rows:6,className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded focus:outline-none focus:ring-2 focus:ring-yellow-400 text-white",placeholder:"Detailed description of the service..."})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Features/Highlights"}),e.jsxs("div",{className:"flex items-end space-x-2 mb-4",children:[e.jsx("div",{className:"flex-grow",children:e.jsx("input",{type:"text",value:f,onChange:t=>v(t.target.value),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded focus:outline-none focus:ring-2 focus:ring-yellow-400 text-white",placeholder:"Add a feature or highlight"})}),e.jsx("button",{type:"button",onClick:P,className:"px-4 py-2 bg-yellow-400 text-slate-900 rounded hover:bg-yellow-500 transition-colors",children:e.jsx(k,{size:18})})]}),s.features&&s.features.length>0?e.jsx("ul",{className:"space-y-2 bg-slate-700/50 rounded-md p-4",children:s.features.map((t,l)=>e.jsxs("li",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-start",children:[e.jsx("span",{className:"text-yellow-400 mr-2",children:"•"}),e.jsx("span",{className:"text-white",children:t})]}),e.jsx("button",{type:"button",onClick:()=>T(l),className:"text-red-400 hover:text-red-300",children:e.jsx(U,{size:16})})]},l))}):e.jsx("p",{className:"text-gray-500 italic text-center py-4",children:"No features added yet"})]})]}),e.jsxs("div",{className:"bg-slate-800 rounded-lg shadow-lg p-6 mb-8",children:[e.jsx("h2",{className:"text-xl font-medium text-white mb-6",children:"Call to Action"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"CTA Text"}),e.jsx("input",{type:"text",name:"cta_text",value:s.cta_text||"",onChange:a,className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded focus:outline-none focus:ring-2 focus:ring-yellow-400 text-white",placeholder:"e.g., BOOK A SESSION"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"CTA Link"}),e.jsx("input",{type:"text",name:"cta_link",value:s.cta_link||"",onChange:a,className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded focus:outline-none focus:ring-2 focus:ring-yellow-400 text-white",placeholder:"e.g., /contact"})]})]})]}),e.jsxs("div",{className:"bg-slate-800 rounded-lg shadow-lg p-6 mb-8",children:[e.jsx("h2",{className:"text-xl font-medium text-white mb-6",children:"SEO Settings"}),e.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Meta Title"}),e.jsx("input",{type:"text",name:"meta_title",value:s.meta_title||"",onChange:a,className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded focus:outline-none focus:ring-2 focus:ring-yellow-400 text-white",placeholder:"SEO Title for browser tab and search results"}),e.jsxs("p",{className:"mt-1 text-sm text-gray-500",children:["Recommended length: 50-60 characters. Current length: ",(s.meta_title||"").length]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Meta Description"}),e.jsx("textarea",{name:"meta_description",value:s.meta_description||"",onChange:a,rows:3,className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded focus:outline-none focus:ring-2 focus:ring-yellow-400 text-white",placeholder:"Description that appears in search engine results"}),e.jsxs("p",{className:"mt-1 text-sm text-gray-500",children:["Recommended length: 150-160 characters. Current length: ",(s.meta_description||"").length]})]})]})]}),e.jsxs("div",{className:"flex justify-between",children:[s.id&&e.jsxs("button",{type:"button",onClick:()=>b(!0),className:"px-4 py-2 bg-red-500/20 text-red-400 rounded hover:bg-red-500/30 transition-colors",children:[e.jsx(G,{size:18,className:"inline mr-1"}),"Delete Service"]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("button",{type:"button",onClick:()=>{c(!1),r(null)},className:"px-4 py-2 border border-gray-600 rounded text-gray-300 hover:bg-gray-700 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-6 py-3 bg-yellow-400 text-slate-900 rounded hover:bg-yellow-500 transition-colors flex items-center",disabled:p,children:p?e.jsxs(e.Fragment,{children:[e.jsx(J,{size:18,className:"mr-2 animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(K,{size:18,className:"mr-2"}),"Save Service"]})})]})]})]})]}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-serif text-white",children:"Service Pages"}),e.jsxs("button",{onClick:_,className:"px-4 py-2 bg-yellow-400 text-slate-900 rounded hover:bg-yellow-500 transition-colors flex items-center",children:[e.jsx(k,{size:18,className:"mr-1"}),"Add New Service"]})]}),u.length===0?e.jsxs("div",{className:"bg-slate-800 rounded-lg p-10 text-center",children:[e.jsx("div",{className:"text-5xl mb-4",children:"🔍"}),e.jsx("h2",{className:"text-xl text-white mb-2",children:"No Service Pages Found"}),e.jsx("p",{className:"text-gray-400 mb-6",children:"Get started by creating your first service page to showcase your offerings."}),e.jsxs("button",{onClick:_,className:"px-6 py-3 bg-yellow-400 text-slate-900 rounded hover:bg-yellow-500 transition-colors",children:[e.jsx(X,{size:18,className:"inline mr-2"}),"Create Service Page"]})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:u.map(t=>e.jsxs("div",{className:"bg-slate-800 rounded-lg overflow-hidden shadow-md hover:shadow-lg transition-shadow",children:[e.jsxs("div",{className:"relative h-40",children:[t.banner_image?e.jsx("img",{src:t.banner_image,alt:t.title,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full bg-slate-700 flex items-center justify-center",children:e.jsx("span",{className:"text-gray-500",children:"No Image"})}),e.jsx("div",{className:"absolute top-2 right-2",children:!t.is_published&&e.jsx("span",{className:"px-2 py-1 bg-gray-800/80 text-gray-300 text-xs rounded",children:"Draft"})})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("h2",{className:"text-white text-lg font-medium mb-2 truncate",children:t.title}),e.jsx("p",{className:"text-gray-400 text-sm mb-4 line-clamp-2",children:t.description}),e.jsx("div",{className:"text-sm text-gray-500 mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(W,{size:14,className:"mr-1"}),e.jsxs("span",{children:[Array.isArray(t.features)?t.features.length:0," Features"]})]})}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("button",{onClick:()=>window.open(`/services/${t.slug}`,"_blank"),className:"text-blue-400 flex items-center text-sm hover:text-blue-300",children:[e.jsx(Q,{size:16,className:"mr-1"}),"Preview"]}),e.jsxs("button",{onClick:()=>D(t),className:"text-yellow-400 flex items-center text-sm hover:text-yellow-300",children:[e.jsx(V,{size:16,className:"mr-1"}),"Edit"]})]})]})]},t.id))})]})]})};export{me as default};
